#!/bin/sh
#
# Pre-push hook: Run all tests and full compilation
# Ensures tests pass and Error Prone checks succeed before pushing
#
# ‚ö†Ô∏è  BYPASSING THIS HOOK IS NOT ALLOWED
# ‚ö†Ô∏è  All tests must pass before pushing

echo "üß™ Running all tests and compilation checks..."

# Run tests and compile (includes Error Prone)
mvn clean test

RESULT=$?

if [ $RESULT -ne 0 ]; then
    echo ""
    echo "‚ùå Tests failed or compilation errors detected!"
    echo ""
    echo "‚ö†Ô∏è  Fix issues before pushing."
    echo "‚ö†Ô∏è  Bypassing this hook is not permitted."
    exit 1
fi

echo "‚úÖ All tests passed and code compiled successfully!"
exit 0
